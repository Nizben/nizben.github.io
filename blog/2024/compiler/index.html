<!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Understanding compiler and linker flags | Nizar Benbouchta </title> <meta name="author" content="Nizar Benbouchta"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://nizben.github.io/blog/2024/compiler/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.min.css" integrity="sha256-q9ba7o845pMPFU+zcAll8rv+gC+fSovKsOoNQ6cynuQ=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css" integrity="sha256-Oppd74ucMR5a5Dq96FxjEzGF7tTw2fZ/6ksAqDCM8GY=" crossorigin="anonymous" media="screen and (prefers-color-scheme: light)"> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github-dark.min.css" integrity="sha256-nyCNAiECsdDHrr/s2OQsp5l9XeY2ZJ0rMepjCT2AkBk=" crossorigin="anonymous" media="screen and (prefers-color-scheme: dark)"> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/diff2html@3.4.47/bundles/css/diff2html.min.css" integrity="sha256-IMBK4VNZp0ivwefSn51bswdsrhk0HoMTLc2GqFHFBXg=" crossorigin="anonymous"> <link defer rel="stylesheet" type="text/css" href="https://tikzjax.com/v1/fonts.css"> <script src="/assets/js/distillpub/template.v2.js"></script> <script src="/assets/js/distillpub/transforms.v2.js"></script> </head> <body> <d-front-matter> <script async type="text/json">
      {
            "title": "Understanding compiler and linker flags",
            "description": "",
            "published": "December 04, 2024",
            "authors": [
              
            ],
            "katex": {
              "delimiters": [
                {
                  "left": "$",
                  "right": "$",
                  "display": false
                },
                {
                  "left": "$$",
                  "right": "$$",
                  "display": true
                }
              ]
            }
          }
    </script> </d-front-matter> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Nizar</span> Benbouchta </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Code </a> </li> <li class="nav-item "> <a class="nav-link" href="/assets/pdf/example_pdf.pdf">Resume </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="post distill"> <d-title> <h1>Understanding compiler and linker flags</h1> <p></p> </d-title> <d-article> <p>When building a program in C, C++, or other compiled languages, one typically invokes a compiler or compiler driver (like <code class="language-plaintext highlighter-rouge">g++</code> or <code class="language-plaintext highlighter-rouge">clang</code>) with a list of command-line options. These options (often referred to as <strong>flags</strong>) tell the compiler how to compile (and sometimes link) your code.</p> <p>I stumbled upon many of these compiling/linking commands through my software engineering career, and this blogpost kind of reflects my current understanding of these concepts, from both a theoretical and practical viewpoints.</p> <p>In this post, we’ll cover:</p> <ul> <li>What flags are and how they’re used.</li> <li>The differences between compilation and linking.</li> <li>Detailed examples for CPU-only builds (GCC/Clang) and GPU-enabled builds (through CUDA’s <code class="language-plaintext highlighter-rouge">nvcc</code>for instance).</li> <li>Nuances like flag ordering, dual-phase flags, and platform-specific considerations.</li> </ul> <h2 id="1-what-are-flags">1. What Are “Flags”?</h2> <p>Compiler flags control different aspects of the compilation process.</p> <p>Typical flags include:</p> <ul> <li> <strong><code class="language-plaintext highlighter-rouge">I</code></strong>: Adds a directory to the compiler’s search path for header files.</li> <li> <strong><code class="language-plaintext highlighter-rouge">L</code></strong>: Adds a directory to the linker’s search path for libraries.</li> <li> <strong><code class="language-plaintext highlighter-rouge">l&lt;name&gt;</code></strong>: Links against a library named <code class="language-plaintext highlighter-rouge">lib&lt;name&gt;.so</code> (on Linux), <code class="language-plaintext highlighter-rouge">lib&lt;name&gt;.dylib</code> (on macOS), or <code class="language-plaintext highlighter-rouge">lib&lt;name&gt;.a</code> (static library).</li> <li> <strong><code class="language-plaintext highlighter-rouge">O3</code>, <code class="language-plaintext highlighter-rouge">O2</code>, <code class="language-plaintext highlighter-rouge">O0</code></strong>: Controls compilation optimization levels (<code class="language-plaintext highlighter-rouge">O3</code> for advanced optimization, <code class="language-plaintext highlighter-rouge">O0</code> for none).</li> <li> <strong><code class="language-plaintext highlighter-rouge">g</code></strong>: Generates debugging symbols for use with debuggers like <code class="language-plaintext highlighter-rouge">gdb</code>.</li> <li> <strong><code class="language-plaintext highlighter-rouge">fPIC</code></strong>: Generates Position-Independent Code (required for shared libraries, e.g. <code class="language-plaintext highlighter-rouge">.so</code> files).</li> <li> <strong><code class="language-plaintext highlighter-rouge">shared</code></strong>: Builds a shared library (e.g. <code class="language-plaintext highlighter-rouge">.so</code> on Linux).</li> <li> <strong><code class="language-plaintext highlighter-rouge">std=c++11</code></strong> (or later standards like <code class="language-plaintext highlighter-rouge">c++14</code>, <code class="language-plaintext highlighter-rouge">c++17</code>): Specifies the C++ standard to use.</li> <li> <strong><code class="language-plaintext highlighter-rouge">fopenmp</code></strong>: Enables OpenMP support for multithreading.</li> <li> <strong><code class="language-plaintext highlighter-rouge">Xcompiler</code> or <code class="language-plaintext highlighter-rouge">Xlinker</code> (in <code class="language-plaintext highlighter-rouge">nvcc</code>)</strong>: Passes flags directly to the host compiler or linker.</li> </ul> <p>These flags provide precise control over how your code is parsed, optimized, and linked.</p> <h2 id="2-how-do-flags-relate-to-compilers">2. How Do Flags Relate to Compilers?</h2> <h3 id="21-compilation-vs-linking">2.1 Compilation vs. Linking</h3> <p><strong>Compilation</strong>:</p> <ul> <li>The compiler translates your source code (<code class="language-plaintext highlighter-rouge">.c</code>, <code class="language-plaintext highlighter-rouge">.cpp</code>, etc.) into object files (<code class="language-plaintext highlighter-rouge">.o</code>, <code class="language-plaintext highlighter-rouge">.obj</code>).</li> </ul> <p><strong>Linking</strong>:</p> <ul> <li>A linker (often invoked implicitly by the compiler driver) combines object files and required libraries into a final executable (e.g. <code class="language-plaintext highlighter-rouge">a.out</code>) or library (e.g. <code class="language-plaintext highlighter-rouge">.so</code>, <code class="language-plaintext highlighter-rouge">.dll</code>).</li> </ul> <p><strong>Examples of Flag Usage:</strong></p> <ul> <li> <strong>Compilation-only flags</strong> (e.g., <code class="language-plaintext highlighter-rouge">I</code>, <code class="language-plaintext highlighter-rouge">std=c++11</code>, <code class="language-plaintext highlighter-rouge">fPIC</code>, <code class="language-plaintext highlighter-rouge">O3</code>) instruct the compiler on parsing, header search paths, optimizations, etc.</li> <li> <strong>Linking-only flags</strong> (e.g., <code class="language-plaintext highlighter-rouge">L</code>, <code class="language-plaintext highlighter-rouge">l</code>) tell the linker where to find and which libraries to link against.</li> <li> <strong>Dual-phase flags</strong>: Some flags like <code class="language-plaintext highlighter-rouge">fopenmp</code> affect both the compilation and linking stages, adding necessary libraries during linking.</li> </ul> <blockquote> <p>Note on Linker Flag Order:</p> <p>The order of libraries in the linker command can sometimes matter, particularly with static libraries. If unresolved symbols appear, adjusting the order might resolve them.</p> </blockquote> <h3 id="22-example-of-a-typical-g-command">2.2 Example of a Typical <code class="language-plaintext highlighter-rouge">g++</code> Command</h3> <p><strong>Compilation:</strong></p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>g++ <span class="nt">-I</span>/usr/local/include <span class="nt">-O3</span> <span class="nt">-std</span><span class="o">=</span>c++11 <span class="nt">-c</span> myfile.cpp <span class="nt">-o</span> myfile.o
</code></pre></div></div> <ul> <li> <code class="language-plaintext highlighter-rouge">I/usr/local/include</code>: Look for header files in <code class="language-plaintext highlighter-rouge">/usr/local/include</code>.</li> <li> <code class="language-plaintext highlighter-rouge">O3</code> and <code class="language-plaintext highlighter-rouge">std=c++11</code>: Enable advanced optimization and specify the C++ standard.</li> <li> <code class="language-plaintext highlighter-rouge">c</code>: Compile only (do not link). The output is <code class="language-plaintext highlighter-rouge">myfile.o</code>.</li> </ul> <p><strong>Linking:</strong></p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>g++ myfile.o <span class="nt">-L</span>/usr/local/lib <span class="nt">-lm</span> <span class="nt">-o</span> myapp
</code></pre></div></div> <ul> <li> <code class="language-plaintext highlighter-rouge">L/usr/local/lib</code>: Look for libraries in <code class="language-plaintext highlighter-rouge">/usr/local/lib</code>.</li> <li> <code class="language-plaintext highlighter-rouge">lm</code>: Link against the math library (<code class="language-plaintext highlighter-rouge">libm.so</code> on Linux).</li> <li> <code class="language-plaintext highlighter-rouge">o myapp</code>: Output an executable named <code class="language-plaintext highlighter-rouge">myapp</code>.</li> </ul> <p>You can also combine these steps:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>g++ <span class="nt">-I</span>/usr/local/include <span class="nt">-O3</span> <span class="nt">-std</span><span class="o">=</span>c++11 myfile.cpp <span class="nt">-L</span>/usr/local/lib <span class="nt">-lm</span> <span class="nt">-o</span> myapp
</code></pre></div></div> <p>Under the hood, the compiler first compiles, then links, all in one invocation.</p> <h2 id="3-what-are-linkers">3. What Are Linkers?</h2> <p>A <strong>linker</strong> is a program that resolves references between object files and external libraries. For example, if your code calls <code class="language-plaintext highlighter-rouge">sqrt()</code> from the math library, the linker locates where <code class="language-plaintext highlighter-rouge">sqrt</code> is defined (in <code class="language-plaintext highlighter-rouge">libm.so</code> on Linux, <code class="language-plaintext highlighter-rouge">.so</code> for <code class="language-plaintext highlighter-rouge">shared objects</code>) and links it into the final executable.</p> <p>When you pass flags like <code class="language-plaintext highlighter-rouge">-L/usr/local/lib -lm</code>, you’re telling the linker to:</p> <ul> <li> <strong><code class="language-plaintext highlighter-rouge">L/usr/local/lib</code></strong>: Search <code class="language-plaintext highlighter-rouge">/usr/local/lib</code> for libraries.</li> <li> <strong><code class="language-plaintext highlighter-rouge">lm</code></strong>: Link against the math library (locating <code class="language-plaintext highlighter-rouge">libm.so</code>, <code class="language-plaintext highlighter-rouge">libm.a</code>, etc ….).</li> </ul> <h2 id="4-why-use-l-and-l">4. Why Use <code class="language-plaintext highlighter-rouge">L</code> and <code class="language-plaintext highlighter-rouge">l</code>?</h2> <ul> <li> <strong><code class="language-plaintext highlighter-rouge">L&lt;dir&gt;</code></strong>: Adds <code class="language-plaintext highlighter-rouge">&lt;dir&gt;</code> to the linker’s search directories.</li> <li> <strong><code class="language-plaintext highlighter-rouge">l&lt;name&gt;</code></strong>: Tells the linker to look for a file named <code class="language-plaintext highlighter-rouge">lib&lt;name&gt;.so</code>, <code class="language-plaintext highlighter-rouge">lib&lt;name&gt;.dylib</code>, or <code class="language-plaintext highlighter-rouge">lib&lt;name&gt;.a</code>.</li> </ul> <p><strong>Example:</strong></p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>g++ main.o <span class="nt">-L</span>/home/me/mylibs <span class="nt">-lfoo</span> <span class="nt">-o</span> main
</code></pre></div></div> <p>The linker checks <code class="language-plaintext highlighter-rouge">/home/me/mylibs</code> for <code class="language-plaintext highlighter-rouge">libfoo.so</code> (shared) or <code class="language-plaintext highlighter-rouge">libfoo.a</code> (static) and includes it in the final executable.</p> <blockquote> <p>Static vs. Shared Libraries:</p> <p>While the discussion above focuses on shared libraries (using flags like <code class="language-plaintext highlighter-rouge">-shared</code> and <code class="language-plaintext highlighter-rouge">-fPIC</code>), static libraries are linked differently. For static libraries, the linker includes the library code directly into the executable, and the flags used (<code class="language-plaintext highlighter-rouge">-l&lt;name&gt;</code>) point to <code class="language-plaintext highlighter-rouge">.a</code> files instead of <code class="language-plaintext highlighter-rouge">.so</code> or <code class="language-plaintext highlighter-rouge">.dylib</code>.</p> </blockquote> <h2 id="5-how-does-a-compiler-work-internally">5. How Does a Compiler Work Internally?</h2> <p>Here’s a very simplified overview of the compilation process:</p> <ol> <li> <strong>Preprocessing</strong> <ul> <li>Processes directives like <code class="language-plaintext highlighter-rouge">#include</code> and <code class="language-plaintext highlighter-rouge">#define</code> (for code in C/C++ for instance), expanding macros and including header files.</li> </ul> </li> <li> <strong>Parsing &amp; Semantic Analysis</strong> <ul> <li>Converts the source code into an internal representation (often an Abstract Syntax Tree) and checks for errors (e.g. type mismatches).</li> </ul> </li> <li> <strong>Optimization</strong> <ul> <li>Applies optimizations based on flags such as <code class="language-plaintext highlighter-rouge">O2</code> or <code class="language-plaintext highlighter-rouge">O3</code>.</li> </ul> </li> <li> <strong>Code Generation</strong> <ul> <li>Translates the optimized code into machine instructions (Assembly code).</li> </ul> </li> <li> <strong>Assembly &amp; Object File Creation</strong> <ul> <li>The assembly is transformed into an object file (<code class="language-plaintext highlighter-rouge">.o</code> or <code class="language-plaintext highlighter-rouge">.obj</code>) containing machine code and unresolved symbols.</li> </ul> </li> <li> <strong>Linking</strong> <ul> <li>The linker merges multiple object files and libraries to produce the final executable or library.</li> </ul> </li> </ol> <h2 id="6-code-snippets-of-typical-compilerlinker-commands">6. Code Snippets of Typical Compiler/Linker Commands</h2> <h3 id="61-c-on-linux-with-a-shared-library">6.1 C++ on Linux with a Shared Library</h3> <p><strong>Compile:</strong></p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>g++ <span class="nt">-fPIC</span> <span class="nt">-Iinclude</span> <span class="nt">-O3</span> <span class="nt">-std</span><span class="o">=</span>c++17 <span class="nt">-c</span> mylibrary.cpp <span class="nt">-o</span> mylibrary.o
</code></pre></div></div> <ul> <li> <strong><code class="language-plaintext highlighter-rouge">fPIC</code></strong>: Required for generating position-independent code for shared libraries.</li> </ul> <p><strong>Link:</strong></p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>g++ <span class="nt">-shared</span> <span class="nt">-o</span> libmylibrary.so mylibrary.o
</code></pre></div></div> <ul> <li> <strong><code class="language-plaintext highlighter-rouge">shared</code></strong>: Produces a <code class="language-plaintext highlighter-rouge">.so</code> shared object.</li> </ul> <p><strong>Using the Shared Library:</strong></p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>g++ main.cpp <span class="nt">-Iinclude</span> <span class="nt">-L</span><span class="nb">.</span> <span class="nt">-lmylibrary</span> <span class="nt">-o</span> main
</code></pre></div></div> <ul> <li> <strong><code class="language-plaintext highlighter-rouge">Iinclude</code></strong>: Look for header files.</li> <li> <strong><code class="language-plaintext highlighter-rouge">L.</code></strong>: Look in the current directory for libraries.</li> <li> <strong><code class="language-plaintext highlighter-rouge">lmylibrary</code></strong>: Link against <code class="language-plaintext highlighter-rouge">libmylibrary.so</code>.</li> </ul> <hr> <h3 id="62-using-openmp">6.2 Using OpenMP</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>g++ <span class="nt">-fopenmp</span> <span class="nt">-O3</span> main.cpp <span class="nt">-o</span> main
</code></pre></div></div> <ul> <li> <strong><code class="language-plaintext highlighter-rouge">fopenmp</code></strong>: Enables both compiler and linker support for OpenMP, automatically linking with the OpenMP runtime (e.g., <code class="language-plaintext highlighter-rouge">libgomp</code>).</li> </ul> <hr> <h3 id="63-example-with-clang-on-macos">6.3 Example with Clang on macOS</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>clang++ <span class="nt">-std</span><span class="o">=</span>c++14 <span class="nt">-stdlib</span><span class="o">=</span>libc++ <span class="nt">-I</span>/usr/local/include <span class="nt">-L</span>/usr/local/lib main.cpp <span class="nt">-o</span> myapp <span class="nt">-lc</span>++
</code></pre></div></div> <ul> <li>macOS often defaults to different standard libraries (<code class="language-plaintext highlighter-rouge">libc++</code> vs. <code class="language-plaintext highlighter-rouge">libstdc++</code>), so specifying <code class="language-plaintext highlighter-rouge">stdlib=libc++</code> and linking with <code class="language-plaintext highlighter-rouge">lc++</code> is useful.</li> <li> <strong>Platform differences:</strong> Although this post focuses on Linux and macOS, note that Windows uses different conventions (such as <code class="language-plaintext highlighter-rouge">.lib</code> files).</li> </ul> <h2 id="7-cuda-example">7. CUDA Example</h2> <p>When compiling CUDA code, you typically use <code class="language-plaintext highlighter-rouge">nvcc</code>, NVIDIA’s compiler driver. Under the hood, <code class="language-plaintext highlighter-rouge">nvcc</code> calls the host compiler (like <code class="language-plaintext highlighter-rouge">gcc</code> or <code class="language-plaintext highlighter-rouge">clang</code>) for CPU code.</p> <p><strong>Basic CUDA Compilation:</strong></p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nvcc <span class="nt">-I</span>/path/to/cuda/include <span class="nt">-c</span> mykernel.cu <span class="nt">-o</span> mykernel.o
</code></pre></div></div> <p><strong>More Complex Example:</strong></p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nvcc <span class="nt">-arch</span><span class="o">=</span>sm_75 <span class="se">\\</span>
     <span class="nt">-I</span>/usr/local/cuda/include <span class="se">\\</span>
     <span class="nt">-I</span>/usr/local/include <span class="se">\\</span>
     <span class="nt">-L</span>/usr/local/cuda/lib64 <span class="se">\\</span>
     <span class="nt">-lcudart</span> <span class="se">\\</span>
     <span class="nt">-Xcompiler</span> <span class="nt">-fPIC</span> <span class="se">\\</span>
     <span class="nt">-O3</span> <span class="nt">-o</span> mycudaapp main.cu
</code></pre></div></div> <ul> <li> <strong><code class="language-plaintext highlighter-rouge">arch=sm_75</code></strong>: Specifies the target GPU architecture (e.g., NVIDIA Turing).</li> <li> <strong><code class="language-plaintext highlighter-rouge">I/usr/local/cuda/include</code></strong>: Specifies the directory for CUDA headers (e.g <code class="language-plaintext highlighter-rouge">cuda_runtime.h</code>).</li> <li> <strong><code class="language-plaintext highlighter-rouge">L/usr/local/cuda/lib64</code> &amp; <code class="language-plaintext highlighter-rouge">lcudart</code></strong>: Directs the linker to the CUDA runtime library (<code class="language-plaintext highlighter-rouge">libcudart.so</code>).</li> <li> <strong><code class="language-plaintext highlighter-rouge">Xcompiler -fPIC</code></strong>: Passes <code class="language-plaintext highlighter-rouge">fPIC</code> to the host compiler.</li> <li> <strong><code class="language-plaintext highlighter-rouge">O3</code></strong>: Applies optimization.</li> </ul> <h2 id="8-putting-it-all-together">8. Putting It All Together</h2> <ul> <li> <p><strong>Headers (<code class="language-plaintext highlighter-rouge">.h</code>, <code class="language-plaintext highlighter-rouge">.hpp</code>)</strong></p> <p>Found via <code class="language-plaintext highlighter-rouge">-I</code> paths.</p> </li> <li> <p><strong>Libraries (<code class="language-plaintext highlighter-rouge">libsomething.so</code>, <code class="language-plaintext highlighter-rouge">libsomething.a</code>)</strong></p> <p>Found via <code class="language-plaintext highlighter-rouge">-L</code> paths and included with <code class="language-plaintext highlighter-rouge">-lsomething</code>.</p> </li> <li> <p><strong>Optimization and Standards</strong></p> <p>Controlled via flags like <code class="language-plaintext highlighter-rouge">-O2</code>, <code class="language-plaintext highlighter-rouge">-O3</code>, and <code class="language-plaintext highlighter-rouge">-std=c++17</code>.</p> </li> <li> <p><strong>Position-Independent Code (PIC)</strong></p> <p>Required for shared libraries via <code class="language-plaintext highlighter-rouge">-fPIC</code>.</p> </li> <li> <p><strong>Shared Library Output</strong></p> <p>Created with <code class="language-plaintext highlighter-rouge">-shared</code>.</p> </li> <li> <p><strong>OpenMP</strong></p> <p>Enabled with <code class="language-plaintext highlighter-rouge">-fopenmp</code>, with consideration for dual-phase (compilation and linking) behavior.</p> </li> <li> <p><strong>CUDA</strong></p> <p>Managed by <code class="language-plaintext highlighter-rouge">nvcc</code> alongside host compiler flags, targeting specific GPU architectures with <code class="language-plaintext highlighter-rouge">-arch=sm_xx</code>.</p> </li> </ul> <h2 id="9-summary">9. Summary</h2> <p>Understanding compiler and linker flags is crucial for building functional and optimized software. Here’s what you need to remember:</p> <ul> <li> <strong>Compiler flags</strong> shape how the source code is processed, optimized, and debugged.</li> <li> <strong>Linker flags</strong> (<code class="language-plaintext highlighter-rouge">L</code> and <code class="language-plaintext highlighter-rouge">l</code>) determine how external libraries are located and included.</li> <li>A <strong>linker</strong> resolves external symbols by combining object files and libraries.</li> <li> <strong>CUDA builds</strong> require managing both device and host code, with <code class="language-plaintext highlighter-rouge">nvcc</code> orchestrating the process.</li> <li> <strong>Platform Nuances &amp; Ordering:</strong> Pay attention to the order of linker flags and be aware of platform-specific differences (Linux, macOS, Windows).</li> </ul> <p>By carefully controlling these flags, you can ensure your project is both robust and efficient.</p> </d-article> <d-appendix> <d-footnote-list></d-footnote-list> <d-citation-list></d-citation-list> </d-appendix> <d-bibliography src="/assets/bibliography/"></d-bibliography> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Nizar Benbouchta. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/mermaid@10.7.0/dist/mermaid.min.js" integrity="sha256-TtLOdUA8mstPoO6sGvHIGx2ceXrrX4KgIItO06XOn8A=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/d3@7.8.5/dist/d3.min.js" integrity="sha256-1rA678n2xEx7x4cTZ5x4wpUCj6kUMZEZ5cxLSVSFWxw=" crossorigin="anonymous"></script> <script defer src="/assets/js/mermaid-setup.js?38ca0a0126f7328d2d9a46bad640931f" type="text/javascript"></script> <script src="https://cdn.jsdelivr.net/npm/diff2html@3.4.47/bundles/js/diff2html-ui.min.js" integrity="sha256-eU2TVHX633T1o/bTQp6iIJByYJEtZThhF9bKz/DcbbY=" crossorigin="anonymous"></script> <script defer src="/assets/js/diff2html-setup.js?80a6e52ce727518bbd3aed2bb6ba5601" type="text/javascript"></script> <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.min.js" integrity="sha256-MgH13bFTTNqsnuEoqNPBLDaqxjGH+lCpqrukmXc8Ppg=" crossorigin="anonymous"></script> <script defer src="/assets/js/leaflet-setup.js?b6313931e203b924523e2d8b75fe8874" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" integrity="sha256-0q+JdOlScWOHcunpUk21uab1jW7C1deBQARHtKMcaB4=" crossorigin="anonymous"></script> <script defer src="/assets/js/chartjs-setup.js?183c5859923724fb1cb3c67593848e71" type="text/javascript"></script> <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js" integrity="sha256-QvgynZibb2U53SsVu98NggJXYqwRL7tg3FeyfXvPOUY=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/theme/dark-fresh-cut.js" integrity="sha256-sm6Ui9w41++ZCWmIWDLC18a6ki72FQpWDiYTDxEPXwU=" crossorigin="anonymous"></script> <script defer src="/assets/js/echarts-setup.js?738178999630746a8d0cfc261fc47c2c" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/vega@5.27.0/build/vega.min.js" integrity="sha256-Yot/cfgMMMpFwkp/5azR20Tfkt24PFqQ6IQS+80HIZs=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/vega-lite@5.16.3/build/vega-lite.min.js" integrity="sha256-TvBvIS5jUN4BSy009usRjNzjI1qRrHPYv7xVLJyjUyw=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/vega-embed@6.24.0/build/vega-embed.min.js" integrity="sha256-FPCJ9JYCC9AZSpvC/t/wHBX7ybueZhIqOMjpWqfl3DU=" crossorigin="anonymous"></script> <script defer src="/assets/js/vega-setup.js?7c7bee055efe9312afc861b128fe5f36" type="text/javascript"></script> <script defer src="https://tikzjax.com/v1/tikzjax.js" integrity="sha256-+1qyucCXRZJrCg3lm3KxRt/7WXaYhBid4/1XJRHGB1E=" crossorigin="anonymous"></script> <script src="/assets/js/typograms.js?062e75bede72543443762dc3fe36c7a5"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> </body> </html>